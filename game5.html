<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game 7 - Water Color Sort</title>
<link rel="stylesheet" href="style.css">
<style>
body {
  font-family: 'Inter', sans-serif;
  text-align:center;
  background:#f0f2f5;
}
h1 {
  margin-top: 20px;
  color: #222;
}
#gameArea {
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  margin-top: 30px;
  gap: 15px;
}
.tube {
  width:50px;
  height:150px;
  border:2px solid #555;
  border-radius:10px;
  background:#ccc;
  display:flex;
  flex-direction:column-reverse;
  cursor:pointer;
  padding:5px;
}
.colorBlock {
  height:35px;
  margin:2px 0;
  border-radius:5px;
}
button.home-link {
  margin-top:20px;
  padding:10px 20px;
  border:none;
  border-radius:10px;
  background:#2575fc;
  color:white;
  font-size:1rem;
  cursor:pointer;
  transition:0.3s;
}
button.home-link:hover {
  background:#1e5ed1;
}
</style>
</head>
<body>
<h1>Game 7: Water Color Sort</h1>
<div id="gameArea"></div>
<button class="home-link" onclick="window.location.href='index.html'">üè† Back to Home</button>

<script>
const colors = ["red","blue","green","yellow"];
let tubes = [];
let selectedTube = null;

// Initialize tubes
function initGame(){
  tubes = [
    ["red","blue","green","yellow"],
    ["yellow","green","blue","red"],
    [],
    []
  ];
  renderTubes();
}

// Render tubes
function renderTubes(){
  const gameArea = document.getElementById("gameArea");
  gameArea.innerHTML = "";
  tubes.forEach((tube,index)=>{
    const tubeDiv = document.createElement("div");
    tubeDiv.classList.add("tube");
    tubeDiv.dataset.index = index;
    tube.forEach(color=>{
      const block = document.createElement("div");
      block.classList.add("colorBlock");
      block.style.background=color;
      tubeDiv.appendChild(block);
    });
    tubeDiv.addEventListener("click",()=>selectTube(index));
    gameArea.appendChild(tubeDiv);
  });
}

// Select and pour colors
function selectTube(index){
  if(selectedTube === null){
    if(tubes[index].length === 0) return;
    selectedTube = index;
    highlightTube(index);
  } else {
    if(selectedTube === index){
      selectedTube = null;
      renderTubes();
      return;
    }
    pourColor(selectedTube,index);
    selectedTube = null;
    renderTubes();
    checkWin();
  }
}

// Highlight selected tube
function highlightTube(index){
  const gameArea = document.getElementById("gameArea");
  gameArea.querySelectorAll(".tube").forEach((tubeDiv,i)=>{
    tubeDiv.style.borderColor = (i===index) ? "#2575fc":"#555";
  });
}

// Pour color logic
function pourColor(from,to){
  if(tubes[from].length===0) return;
  if(tubes[to].length===4) return;
  if(tubes[to].length===0 || tubes[from][tubes[from].length-1]===tubes[to][tubes[to].length-1]){
    tubes[to].push(tubes[from].pop());
  }
}

// Check win
function checkWin(){
  let won = tubes.every(tube => tube.length===0 || tube.every(c=>c===tube[0]));
  if(won){
    setTimeout(()=>alert("üéâ You Win!"),100);
  }
}

initGame();
</script>
</body>
</html>
